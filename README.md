Quet Yi Fung 202169990112


# ğŸ›ï¸ OnlineShop - åœ¨çº¿è´­ç‰©ç½‘ç«™

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åœ¨çº¿è´­ç‰©ç½‘ç«™ç³»ç»Ÿï¼ŒåŒ…å«ç”¨æˆ·ç«¯å’Œç®¡ç†å‘˜ç«¯ï¼Œå®ç°äº†ä»å•†å“æµè§ˆã€è´­ç‰©è½¦ç®¡ç†ã€è®¢å•å¤„ç†åˆ°åå°ç®¡ç†çš„å®Œæ•´è´­ç‰©æµç¨‹ã€‚

**æŠ€æœ¯æ ˆï¼š**
- **å‰ç«¯**: HTML5 + CSS3 + JavaScript (ES6+)
- **åç«¯**: Node.js + Express
- **æ•°æ®åº“**: MySQL
- **è®¤è¯**: JWT (JSON Web Token)
- **å¯†ç åŠ å¯†**: Bcrypt

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
online-shop/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ db.js              # æ•°æ®åº“è¿æ¥é…ç½®
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ auth.js            # JWT è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ routes/                # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.js            # ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•/æ³¨å†Œï¼‰
â”‚   â”‚   â”œâ”€â”€ products.js        # äº§å“ç›¸å…³æ¥å£
â”‚   â”‚   â”œâ”€â”€ cart.js            # è´­ç‰©è½¦æ¥å£
â”‚   â”‚   â”œâ”€â”€ orders.js          # è®¢å•æ¥å£
â”‚   â”‚   â”œâ”€â”€ payment.js         # æ”¯ä»˜æ¥å£
â”‚   â”‚   â”œâ”€â”€ history.js         # æµè§ˆå†å²æ¥å£
â”‚   â”‚   â””â”€â”€ admin.js           # ç®¡ç†å‘˜æ¥å£
â”‚   â”œâ”€â”€ .env                   # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â”œâ”€â”€ server.js              # æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚   â””â”€â”€ package.json           # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ frontend/                   # å‰ç«¯é¡µé¢
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ css/               # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ common.css     # é€šç”¨æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ navigation.css # å¯¼èˆªæ æ ·å¼
â”‚   â”‚   â”‚   â””â”€â”€ components.css # ç»„ä»¶æ ·å¼
â”‚   â”‚   â””â”€â”€ js/                # JavaScript æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ api.js         # API è¯·æ±‚å°è£…
â”‚   â”‚       â”œâ”€â”€ navigation.js  # å¯¼èˆªæ ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ utils.js       # å·¥å…·å‡½æ•°
â”‚   â”‚       â””â”€â”€ modal.js       # æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”œâ”€â”€ user/                  # ç”¨æˆ·ç«¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ home.html          # ç”¨æˆ·ä¸»é¡µ
â”‚   â”‚   â”œâ”€â”€ products.html      # äº§å“åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ product-detail.html # äº§å“è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ cart.html          # è´­ç‰©è½¦
â”‚   â”‚   â”œâ”€â”€ payment.html       # æ”¯ä»˜é¡µé¢
â”‚   â”‚   â”œâ”€â”€ orders.html        # è®¢å•åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ product-history.html # æµè§ˆå†å²
â”‚   â”‚   â””â”€â”€ profile.html       # ä¸ªäººä¸­å¿ƒ
â”‚   â”œâ”€â”€ admin/                 # ç®¡ç†å‘˜ç«¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ dashboard.html     # ç®¡ç†å‘˜ä»ªè¡¨ç›˜
â”‚   â”‚   â”œâ”€â”€ manage-products.html # äº§å“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ manage-orders.html # è®¢å•ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ manage-customers.html # å®¢æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ sales-report.html # é”€å”®æŠ¥è¡¨
â”‚   â”‚   â””â”€â”€ customer-logs.html # å®¢æˆ·æ—¥å¿—
â”‚   â”œâ”€â”€ index.html             # é¦–é¡µ
â”‚   â”œâ”€â”€ login.html             # ç™»å½•é¡µé¢
â”‚   â””â”€â”€ register.html          # æ³¨å†Œé¡µé¢
â””â”€â”€ database/
    â””â”€â”€ init.sql               # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### 1. usersï¼ˆç”¨æˆ·è¡¨ï¼‰
```sql
- user_id: ç”¨æˆ·IDï¼ˆä¸»é”®ï¼‰
- username: ç”¨æˆ·å
- email: é‚®ç®±
- password: å¯†ç ï¼ˆbcrypt åŠ å¯†ï¼‰
- full_name: å§“å
- phone: æ‰‹æœºå·
- role: è§’è‰²ï¼ˆuser/adminï¼‰
- created_at: åˆ›å»ºæ—¶é—´
```

#### 2. productsï¼ˆäº§å“è¡¨ï¼‰
```sql
- product_id: äº§å“IDï¼ˆä¸»é”®ï¼‰
- category_id: åˆ†ç±»IDï¼ˆå¤–é”®ï¼‰
- product_name: äº§å“åç§°
- description: äº§å“æè¿°
- price: ä»·æ ¼
- stock_quantity: åº“å­˜æ•°é‡
- image_url: å›¾ç‰‡åœ°å€
- is_featured: æ˜¯å¦ç²¾é€‰
```

#### 3. ordersï¼ˆè®¢å•è¡¨ï¼‰
```sql
- order_id: è®¢å•IDï¼ˆä¸»é”®ï¼‰
- user_id: ç”¨æˆ·IDï¼ˆå¤–é”®ï¼‰
- total_amount: è®¢å•æ€»é¢
- status: è®¢å•çŠ¶æ€ï¼ˆunpaid/paid/shipped/delivered/cancelledï¼‰
- shipping_address: é…é€åœ°å€
- created_at: åˆ›å»ºæ—¶é—´
```

#### 4. cartï¼ˆè´­ç‰©è½¦è¡¨ï¼‰
```sql
- cart_id: è´­ç‰©è½¦IDï¼ˆä¸»é”®ï¼‰
- user_id: ç”¨æˆ·IDï¼ˆå¤–é”®ï¼‰
- product_id: äº§å“IDï¼ˆå¤–é”®ï¼‰
- quantity: æ•°é‡
```

#### 5. browsing_historyï¼ˆæµè§ˆå†å²è¡¨ï¼‰
```sql
- history_id: å†å²IDï¼ˆä¸»é”®ï¼‰
- user_id: ç”¨æˆ·IDï¼ˆå¤–é”®ï¼‰
- product_id: äº§å“IDï¼ˆå¤–é”®ï¼‰
- viewed_at: æµè§ˆæ—¶é—´
```

#### 6. customer_logsï¼ˆå®¢æˆ·æ—¥å¿—è¡¨ï¼‰
```sql
- log_id: æ—¥å¿—IDï¼ˆä¸»é”®ï¼‰
- user_id: ç”¨æˆ·IDï¼ˆå¤–é”®ï¼‰
- action_type: è¡Œä¸ºç±»å‹ï¼ˆlogin/register/view_product/add_to_cart/purchaseï¼‰
- details: è¯¦ç»†ä¿¡æ¯
- ip_address: IPåœ°å€
- created_at: åˆ›å»ºæ—¶é—´
```

**å®Œæ•´è¡¨ç»“æ„è¯·æŸ¥çœ‹ï¼š** `database/init.sql`

---

## ğŸš€ å®‰è£…ä¸è¿è¡Œ

### å‰ç½®è¦æ±‚
- Node.js >= 14.x
- MySQL >= 5.7
- npm æˆ– yarn

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <ä½ çš„ä»“åº“åœ°å€>
cd online-shop
```

### 2. é…ç½®æ•°æ®åº“
```bash
# ç™»å½• MySQL
mysql -u root -p

# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE shop;

# å¯¼å…¥æ•°æ®åº“ç»“æ„
mysql -u root -p shop < database/init.sql
```

### 3. é…ç½®åç«¯
```bash
cd backend

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
# åˆ›å»º .env æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=ä½ çš„å¯†ç 
DB_NAME=shop
JWT_SECRET=your_secret_key
PORT=5000

# å¯åŠ¨åç«¯æœåŠ¡
npm run dev
```

### 4. è¿è¡Œå‰ç«¯
```bash
cd frontend

# ä½¿ç”¨ Live Serverï¼ˆæ¨èï¼‰
# åœ¨ VS Code ä¸­å³é”® frontend æ–‡ä»¶å¤¹ â†’ Open with Live Server

# æˆ–ä½¿ç”¨ Python
python -m http.server 8080
```

### 5. è®¿é—®ç³»ç»Ÿ
- **å‰ç«¯åœ°å€**: http://localhost:8080
- **åç«¯åœ°å€**: http://localhost:5000
- **API æ–‡æ¡£**: http://localhost:5000/api

---

## ğŸ‘¤ æµ‹è¯•è´¦æˆ·

### ç®¡ç†å‘˜è´¦æˆ·
- **ç”¨æˆ·å**: admin
- **å¯†ç **: password123
- **æƒé™**: å®Œæ•´ç®¡ç†æƒé™

### æ™®é€šç”¨æˆ·è´¦æˆ·
- **ç”¨æˆ·å**: zhangsan
- **å¯†ç **: password123

- **ç”¨æˆ·å**: lisi
- **å¯†ç **: password123

---

## ğŸ“Œ æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### ç”¨æˆ·ç«¯åŠŸèƒ½

#### 1. ç”¨æˆ·è®¤è¯
- **æ–‡ä»¶**: `frontend/login.html`, `frontend/register.html`
- **åç«¯**: `backend/routes/auth.js`
- **åŠŸèƒ½**: 
  - ç”¨æˆ·æ³¨å†Œï¼ˆå¯†ç  bcrypt åŠ å¯†ï¼‰
  - ç”¨æˆ·ç™»å½•ï¼ˆJWT token è®¤è¯ï¼‰
  - è‡ªåŠ¨è§’è‰²è¯†åˆ«è·³è½¬

#### 2. äº§å“æµè§ˆ
- **æ–‡ä»¶**: `frontend/user/products.html`, `frontend/user/product-detail.html`
- **åç«¯**: `backend/routes/products.js`
- **åŠŸèƒ½**: 
  - äº§å“åˆ—è¡¨å±•ç¤º
  - å…³é”®è¯æœç´¢
  - åˆ†ç±»ç­›é€‰
  - äº§å“è¯¦æƒ…æŸ¥çœ‹
  - æµè§ˆå†å²è®°å½•

#### 3. è´­ç‰©è½¦ç®¡ç†
- **æ–‡ä»¶**: `frontend/user/cart.html`
- **åç«¯**: `backend/routes/cart.js`
- **åŠŸèƒ½**: 
  - æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
  - ä¿®æ”¹å•†å“æ•°é‡
  - åˆ é™¤å•†å“
  - æ¸…ç©ºè´­ç‰©è½¦
  - å®æ—¶è®¡ç®—æ€»ä»·

#### 4. è®¢å•å¤„ç†
- **æ–‡ä»¶**: `frontend/user/orders.html`, `frontend/user/payment.html`
- **åç«¯**: `backend/routes/orders.js`, `backend/routes/payment.js`
- **åŠŸèƒ½**: 
  - åˆ›å»ºè®¢å•
  - è®¢å•æ”¯ä»˜
  - è®¢å•çŠ¶æ€æŸ¥çœ‹
  - å–æ¶ˆè®¢å•
  - è®¢å•å†å²è®°å½•

#### 5. ä¸ªäººä¸­å¿ƒ
- **æ–‡ä»¶**: `frontend/user/profile.html`
- **åŠŸèƒ½**: 
  - ä¸ªäººä¿¡æ¯å±•ç¤º
  - ä¿¡æ¯ç¼–è¾‘ï¼ˆæ¨¡æ€æ¡†ï¼‰
  - ç»Ÿè®¡æ•°æ®ï¼ˆè®¢å•æ•°ã€æ¶ˆè´¹é¢ï¼‰
  - å¿«æ·æ“ä½œå…¥å£

### ç®¡ç†å‘˜ç«¯åŠŸèƒ½

#### 1. æ•°æ®ç»Ÿè®¡
- **æ–‡ä»¶**: `frontend/admin/dashboard.html`
- **åç«¯**: `backend/routes/admin.js`
- **åŠŸèƒ½**: 
  - é”€å”®æ€»é¢ç»Ÿè®¡
  - è®¢å•æ•°é‡ç»Ÿè®¡
  - å®¢æˆ·æ•°é‡ç»Ÿè®¡
  - äº§å“æ•°é‡ç»Ÿè®¡
  - æœ€è¿‘è®¢å•åˆ—è¡¨

#### 2. äº§å“ç®¡ç†
- **æ–‡ä»¶**: `frontend/admin/manage-products.html`
- **åç«¯**: `backend/routes/admin.js`
- **åŠŸèƒ½**: 
  - äº§å“åˆ—è¡¨å±•ç¤º
  - æ·»åŠ æ–°äº§å“
  - ç¼–è¾‘äº§å“ä¿¡æ¯
  - åˆ é™¤äº§å“
  - è®¾ç½®ç²¾é€‰äº§å“

#### 3. è®¢å•ç®¡ç†
- **æ–‡ä»¶**: `frontend/admin/manage-orders.html`
- **åç«¯**: `backend/routes/admin.js`
- **åŠŸèƒ½**: 
  - æ‰€æœ‰è®¢å•åˆ—è¡¨
  - è®¢å•çŠ¶æ€ç­›é€‰
  - ä¿®æ”¹è®¢å•çŠ¶æ€
  - è®¢å•è¯¦æƒ…æŸ¥çœ‹

#### 4. å®¢æˆ·ç®¡ç†
- **æ–‡ä»¶**: `frontend/admin/manage-customers.html`
- **åç«¯**: `backend/routes/admin.js`
- **åŠŸèƒ½**: 
  - å®¢æˆ·åˆ—è¡¨å±•ç¤º
  - å®¢æˆ·æœç´¢
  - å®¢æˆ·è¯¦æƒ…æŸ¥çœ‹
  - å®¢æˆ·æ¶ˆè´¹ç»Ÿè®¡

#### 5. é”€å”®æŠ¥è¡¨
- **æ–‡ä»¶**: `frontend/admin/sales-report.html`
- **åç«¯**: `backend/routes/admin.js`
- **åŠŸèƒ½**: 
  - é”€å”®è¶‹åŠ¿åˆ†æ
  - æ—¶é—´èŒƒå›´ç­›é€‰
  - çƒ­é”€äº§å“æ’è¡Œ
  - é”€å”®é¢ç»Ÿè®¡

#### 6. å®¢æˆ·æ—¥å¿—
- **æ–‡ä»¶**: `frontend/admin/customer-logs.html`
- **åç«¯**: `backend/routes/admin.js`
- **åŠŸèƒ½**: 
  - ç”¨æˆ·è¡Œä¸ºè®°å½•
  - è¡Œä¸ºç±»å‹ç­›é€‰
  - æ—¶é—´èŒƒå›´ç­›é€‰
  - æ—¥å¿—è¯¦æƒ…æŸ¥çœ‹

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

1. **å¯†ç åŠ å¯†**: ä½¿ç”¨ bcrypt åŠ å¯†ç”¨æˆ·å¯†ç 
2. **JWT è®¤è¯**: ä½¿ç”¨ JSON Web Token è¿›è¡Œç”¨æˆ·è®¤è¯
3. **æƒé™æ§åˆ¶**: åŒºåˆ†æ™®é€šç”¨æˆ·å’Œç®¡ç†å‘˜æƒé™
4. **SQL æ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
5. **XSS é˜²æŠ¤**: å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡ŒéªŒè¯å’Œè½¬ä¹‰

---

## ğŸ¨ å‰ç«¯æŠ€æœ¯ç‰¹ç‚¹

### 1. æ¨¡å—åŒ–è®¾è®¡
- **API å°è£…**: ç»Ÿä¸€çš„ API è¯·æ±‚å¤„ç†ï¼ˆ`assets/js/api.js`ï¼‰
- **å¯¼èˆªç»„ä»¶**: å¯å¤ç”¨çš„å¯¼èˆªæ ï¼ˆ`assets/js/navigation.js`ï¼‰
- **å·¥å…·å‡½æ•°**: é€šç”¨å·¥å…·åº“ï¼ˆ`assets/js/utils.js`ï¼‰
- **æ¨¡æ€æ¡†**: ç»Ÿä¸€çš„å¼¹çª—ç®¡ç†ï¼ˆ`assets/js/modal.js`ï¼‰

### 2. å“åº”å¼è®¾è®¡
- ç§»åŠ¨ç«¯é€‚é…
- å¹³æ¿ç«¯é€‚é…
- æ¡Œé¢ç«¯ä¼˜åŒ–

### 3. ç”¨æˆ·ä½“éªŒ
- åŠ è½½åŠ¨ç”»
- Toast æç¤ºæ¶ˆæ¯
- ç¡®è®¤å¯¹è¯æ¡†
- å®æ—¶è¡¨å•éªŒè¯
- é˜²æŠ–æœç´¢

---

## ğŸ”§ åç«¯ API æ–‡æ¡£

### åŸºç¡€ URL
```
http://localhost:5000/api
```

### è®¤è¯ç›¸å…³
```
POST   /auth/register      # ç”¨æˆ·æ³¨å†Œ
POST   /auth/login         # ç”¨æˆ·ç™»å½•
```

### äº§å“ç›¸å…³
```
GET    /products           # è·å–äº§å“åˆ—è¡¨
GET    /products/:id       # è·å–äº§å“è¯¦æƒ…
GET    /products/categories/all  # è·å–æ‰€æœ‰åˆ†ç±»
```

### è´­ç‰©è½¦ç›¸å…³ï¼ˆéœ€è¦ç™»å½•ï¼‰
```
GET    /cart              # è·å–è´­ç‰©è½¦
POST   /cart/add          # æ·»åŠ åˆ°è´­ç‰©è½¦
PUT    /cart/:id          # æ›´æ–°è´­ç‰©è½¦
DELETE /cart/:id          # åˆ é™¤è´­ç‰©è½¦é¡¹
DELETE /cart              # æ¸…ç©ºè´­ç‰©è½¦
```

### è®¢å•ç›¸å…³ï¼ˆéœ€è¦ç™»å½•ï¼‰
```
POST   /orders/create     # åˆ›å»ºè®¢å•
GET    /orders            # è·å–è®¢å•åˆ—è¡¨
GET    /orders/:id        # è·å–è®¢å•è¯¦æƒ…
PUT    /orders/:id/cancel # å–æ¶ˆè®¢å•
```

### æ”¯ä»˜ç›¸å…³ï¼ˆéœ€è¦ç™»å½•ï¼‰
```
POST   /payment/create    # åˆ›å»ºæ”¯ä»˜
GET    /payment/history   # è·å–æ”¯ä»˜å†å²
```

### æµè§ˆå†å²ï¼ˆéœ€è¦ç™»å½•ï¼‰
```
GET    /history           # è·å–æµè§ˆå†å²
POST   /history/add       # æ·»åŠ æµè§ˆè®°å½•
DELETE /history/clear     # æ¸…ç©ºæµè§ˆå†å²
```

### ç®¡ç†å‘˜ç›¸å…³ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
```
GET    /admin/orders              # è·å–æ‰€æœ‰è®¢å•
PUT    /admin/orders/:id/status   # æ›´æ–°è®¢å•çŠ¶æ€
POST   /admin/products            # æ·»åŠ äº§å“
PUT    /admin/products/:id        # æ›´æ–°äº§å“
DELETE /admin/products/:id        # åˆ é™¤äº§å“
GET    /admin/customers           # è·å–å®¢æˆ·åˆ—è¡¨
GET    /admin/customer-logs       # è·å–å®¢æˆ·æ—¥å¿—
GET    /admin/sales-report        # è·å–é”€å”®æŠ¥è¡¨
```
